r24404 | peter | 2011-10-26 09:57:08 +0000 (Wed, 26 Oct 2011) | 1 line

branch2011: import test cases for line number fix from trunk r24155

Index: Build/source/texk/web2c/Makefile.in
===================================================================
--- Build/source/texk/web2c/Makefile.in	(revision 24364)
+++ Build/source/texk/web2c/Makefile.in	(revision 24404)
@@ -1219,6 +1219,10 @@
 EXTRA_LIBRARIES = libmf.a libmplib.a libkanji.a libpdftex.a liblua51.a \
 	libluasocket.a libluamisc.a libff.a libluatex.a libxetex.a \
 	libxetexmm.a libmd5.a
+
+# wprob.test
+
+# wprob.test
 EXTRA_DIST = PROJECTS cftests cpascal.h help.h w2c/config.h \
 	triptrap-sh tangle.web tangle.ch tangleboot.pin cwebdir \
 	ctangleboot.cin cwebboot.cin cwebboot.hin tangle.test \
@@ -1265,39 +1269,39 @@
 	mplibdir/ChangeLog $(mpost_web) $(mp_tests) $(libmplib_web) \
 	mplibdir/lmplib.c $(etex_web_srcs) $(etex_ch_srcs) \
 	etexdir/ChangeLog etexdir/INSTALL etexdir/README \
-	etexdir/etex_gen.tex $(etex_tests) etexdir/etrip/etrip.diffs \
-	etexdir/etrip/etrip.fot etexdir/etrip/etrip.log \
-	etexdir/etrip/etrip.out etexdir/etrip/etrip.pl \
-	etexdir/etrip/etrip.tex etexdir/etrip/etrip.typ \
-	etexdir/etrip/etrip1.in etexdir/etrip/etrip2.in \
-	etexdir/etrip/etrip3.in etexdir/etrip/etripin.log \
-	etexdir/etrip/etripman.tex etexdir/etrip/texmf.cnf \
-	etexdir/etrip/trip2.in $(ptex_tests) $(ptex_web_srcs) \
-	$(ptex_ch_srcs) ptexdir/ptex.defines ptexdir/pbibtex.ch \
-	web2c/cvtbib.sed ptexdir/pdvitype.ch ptexdir/ppltotf.ch \
-	ptexdir/ptftopl.ch ptexdir/COPYRIGHT ptexdir/COPYRIGHT.jis \
-	ptexdir/ChangeLog ptexdir/Changes.txt ptexdir/INSTALL.txt \
-	ptexdir/README.txt ptexdir/tests/nissya_bib.aux \
-	ptexdir/tests/nissya.bst ptexdir/tests/sample.bib \
-	tests/memdata1.bst tests/memdata2.bst tests/memdata3.bst \
-	ptexdir/tests/goth10.tfm ptexdir/tests/sample.dvi \
-	ptexdir/tests/min10.pl ptexdir/tests/min10.tfm \
-	ptexdir/tests/tmin10.pl ptexdir/tests/tmin10.tfm \
-	ptexdir/ptrip/ptrip.diffs ptexdir/ptrip/texmf.cnf \
-	$(eptex_tests) $(eptex_web_srcs) $(eptex_ch_srcs) \
-	eptexdir/eptex.defines eptexdir/ChangeLog \
+	etexdir/etex_gen.tex $(etex_tests) tests/wprob.tex \
+	etexdir/etrip/etrip.diffs etexdir/etrip/etrip.fot \
+	etexdir/etrip/etrip.log etexdir/etrip/etrip.out \
+	etexdir/etrip/etrip.pl etexdir/etrip/etrip.tex \
+	etexdir/etrip/etrip.typ etexdir/etrip/etrip1.in \
+	etexdir/etrip/etrip2.in etexdir/etrip/etrip3.in \
+	etexdir/etrip/etripin.log etexdir/etrip/etripman.tex \
+	etexdir/etrip/texmf.cnf etexdir/etrip/trip2.in $(ptex_tests) \
+	$(ptex_web_srcs) $(ptex_ch_srcs) ptexdir/ptex.defines \
+	ptexdir/pbibtex.ch web2c/cvtbib.sed ptexdir/pdvitype.ch \
+	ptexdir/ppltotf.ch ptexdir/ptftopl.ch ptexdir/COPYRIGHT \
+	ptexdir/COPYRIGHT.jis ptexdir/ChangeLog ptexdir/Changes.txt \
+	ptexdir/INSTALL.txt ptexdir/README.txt \
+	ptexdir/tests/nissya_bib.aux ptexdir/tests/nissya.bst \
+	ptexdir/tests/sample.bib tests/memdata1.bst tests/memdata2.bst \
+	tests/memdata3.bst ptexdir/tests/goth10.tfm \
+	ptexdir/tests/sample.dvi ptexdir/tests/min10.pl \
+	ptexdir/tests/min10.tfm ptexdir/tests/tmin10.pl \
+	ptexdir/tests/tmin10.tfm ptexdir/ptrip/ptrip.diffs \
+	ptexdir/ptrip/texmf.cnf $(eptex_tests) $(eptex_web_srcs) \
+	$(eptex_ch_srcs) eptexdir/eptex.defines eptexdir/ChangeLog \
 	eptexdir/ChangeLog.TL eptexdir/README.txt \
 	eptexdir/eptrip/eptrip.diffs eptexdir/eptrip/etrip.log \
 	eptexdir/eptrip/etrip.tex eptexdir/eptrip/texmf.cnf \
 	$(pdftex_ch_srcs) etexdir/etex.ch pdftexdir/pdftex.defines \
 	pdftexdir/pdftex.h pdftexdir/ChangeLog pdftexdir/NEWS \
 	pdftexdir/README pdftexdir/change-files.txt $(pdftex_tests) \
-	pdftexdir/regex/COPYING.LIB pdftexdir/regex/README \
-	luatexdir/ptexlib.h luatexdir/getluatexsvnversion.sh \
-	$(luatex_tests) luatexdir/lua51/Makefile \
-	luatexdir/lua51/liolib.c luatexdir/lua51/lua.c \
-	luatexdir/lua51/luac.c luatexdir/lua51/print.c \
-	luatexdir/luasocket/src/socket_lua.c \
+	tests/wprob.tex pdftexdir/regex/COPYING.LIB \
+	pdftexdir/regex/README luatexdir/ptexlib.h \
+	luatexdir/getluatexsvnversion.sh $(luatex_tests) \
+	luatexdir/lua51/Makefile luatexdir/lua51/liolib.c \
+	luatexdir/lua51/lua.c luatexdir/lua51/luac.c \
+	luatexdir/lua51/print.c luatexdir/luasocket/src/socket_lua.c \
 	luatexdir/luasocket/src/ftp_lua.c \
 	luatexdir/luasocket/src/http_lua.c \
 	luatexdir/luasocket/src/smtp_lua.c \
@@ -1456,8 +1460,8 @@
 	tests/xptmr.mpx tests/xstory.mpx $(nodist_libmplib_a_SOURCES) \
 	mp-tangle mpmath-tangle psout-tangle svgout-tangle \
 	$(nodist_etex_SOURCES) etex.web etex.ch etex-web2c etex.p \
-	etex.pool etex-tangle etrip.diffs $(pweb_programs:=.c) \
-	$(pweb_programs:=.h) $(pweb_programs:=.p) \
+	etex.pool etex-tangle etrip.diffs wprob.log wprob.tex \
+	$(pweb_programs:=.c) $(pweb_programs:=.h) $(pweb_programs:=.p) \
 	$(pweb_programs:=-web2c) $(pweb_programs:=.web) \
 	$(nodist_ptex_SOURCES) ptex.web ptex.ch ptex-web2c ptex.p \
 	ptex.pool ptex-tangle tests/nissya_bib.* tests/xexampl.aux \
@@ -1467,7 +1471,7 @@
 	$(nodist_eptex_SOURCES) eptex.web eptex.ch eptex-web2c eptex.p \
 	eptex.pool eptex-tangle eptrip.diffs $(nodist_pdftex_SOURCES) \
 	pdftex.ch pdftex-web2c pdftex.p pdftex.pool pdftex-tangle \
-	$(nodist_libluatex_a_SOURCES) txt2zlib.c \
+	wprob.log wprob.tex $(nodist_libluatex_a_SOURCES) txt2zlib.c \
 	$(nodist_xetex_SOURCES) xetex.web xetex-web2c xetex.p \
 	xetex.pool xetex-tangle $(omegaware_programs:=.c) \
 	$(omegaware_programs:=.h) $(omegaware_programs:=.p) \
@@ -1681,7 +1685,7 @@
 
 # e-TeX Tests
 #
-etex_tests = etexdir/etrip.test
+etex_tests = etexdir/wprob.test etexdir/etrip.test
 ptex_cppflags = $(PTEXENC_INCLUDES) $(AM_CPPFLAGS)
 ptex_ldadd = $(pproglib) $(PTEXENC_LIBS) $(LDADD)
 p_tangle = WEBINPUTS=.:$(srcdir)/ptexdir:$(srcdir) $(buildenv) $(TANGLE)
@@ -1806,7 +1810,7 @@
 
 # pdfTeX Tests
 #
-pdftex_tests = pdftexdir/pdftex.test
+pdftex_tests = pdftexdir/wprob.test pdftexdir/pdftex.test
 libpdftex_a_CPPFLAGS = $(pdftex_cppflags)
 libpdftex_a_CXXFLAGS = # $(WARNING_CXXFLAGS)
 libpdftex_a_SOURCES = pdftexdir/avl.c pdftexdir/avl.h \
@@ -9056,7 +9060,6 @@
 # Generate etex.ch
 etex.ch: tie$(EXEEXT) etex.web $(etex_ch_srcs)
 	$(tie) -c etex.ch etex.web $(etex_ch_srcs)
-
 # etrip.test
 etrip.diffs: etex$(EXEEXT)
 	$(triptrap_diffs) $@
Index: Build/source/texk/web2c/etexdir/ChangeLog
===================================================================
--- Build/source/texk/web2c/etexdir/ChangeLog	(revision 24364)
+++ Build/source/texk/web2c/etexdir/ChangeLog	(revision 24404)
@@ -1,3 +1,8 @@
+2011-09-30  Peter Breitenlohner  <peb@mppmu.mpg.de>
+
+	* wprob.test: New shell script to test for uninitialized line.
+	* am/etex.am: Add the new test.
+
 2011-04-07  Peter Breitenlohner  <peb@mppmu.mpg.de>
 
 	* etex.ch: Version 2.3, dated April 7, 2011.

Property changes on: Build/source/texk/web2c/etexdir/wprob.test
___________________________________________________________________
Added: svn:executable
   + *

Index: Build/source/texk/web2c/etexdir/am/etex.am
===================================================================
--- Build/source/texk/web2c/etexdir/am/etex.am	(revision 24364)
+++ Build/source/texk/web2c/etexdir/am/etex.am	(revision 24404)
@@ -1,6 +1,6 @@
 ## texk/web2c/etexdir/am/etex.am: Makefile fragment for e-TeX.
 ##
-## Copyright (C) 2009 - 2011 Peter Breitenlohner <tex-live@tug.org>
+## Copyright (C) 2009-2011 Peter Breitenlohner <tex-live@tug.org>
 ## You may freely use, modify and/or distribute this file.
 
 ## e-TeX
@@ -76,7 +76,7 @@
 
 # e-TeX Tests
 #
-etex_tests = etexdir/etrip.test
+etex_tests = etexdir/wprob.test etexdir/etrip.test
 
 EXTRA_DIST += $(etex_tests)
 
@@ -88,6 +88,9 @@
 endif ETEX
 DISTCLEANFILES += etrip.diffs
 
+# wprob.test
+EXTRA_DIST += tests/wprob.tex
+DISTCLEANFILES += wprob.log wprob.tex
 # etrip.test
 etrip.diffs: etex$(EXEEXT)
 	$(triptrap_diffs) $@

Property changes on: Build/source/texk/web2c/pdftexdir/wprob.test
___________________________________________________________________
Added: svn:executable
   + *

Index: Build/source/texk/web2c/pdftexdir/ChangeLog
===================================================================
--- Build/source/texk/web2c/pdftexdir/ChangeLog	(revision 24364)
+++ Build/source/texk/web2c/pdftexdir/ChangeLog	(revision 24404)
@@ -1,3 +1,8 @@
+2011-09-30  Peter Breitenlohner  <peb@mppmu.mpg.de>
+
+	* wprob.test: New shell script to test for uninitialized line.
+	* am/pdftex.am: Add the new test.
+
 2011-05-12  Peter Breitenlohner  <peb@mppmu.mpg.de>
 
 	* writepng.c: #define PNG_FP_1 for libpng < 1.5.0.
Index: Build/source/texk/web2c/pdftexdir/am/pdftex.am
===================================================================
--- Build/source/texk/web2c/pdftexdir/am/pdftex.am	(revision 24364)
+++ Build/source/texk/web2c/pdftexdir/am/pdftex.am	(revision 24404)
@@ -88,7 +88,7 @@
 
 # pdfTeX Tests
 #
-pdftex_tests = pdftexdir/pdftex.test
+pdftex_tests = pdftexdir/wprob.test pdftexdir/pdftex.test
 
 EXTRA_DIST += $(pdftex_tests)
 
@@ -96,3 +96,7 @@
 TESTS += $(pdftex_tests)
 endif PDFTEX
 
+# wprob.test
+EXTRA_DIST += tests/wprob.tex
+DISTCLEANFILES += wprob.log wprob.tex
+
